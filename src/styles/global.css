@import "tailwindcss";

/* ===== Custom Variants ===== */
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* ===== Color Scheme ===== */
:root,
html[data-theme="light"] {
  --background: #fdfdfd;
  --foreground: #282728;
  --accent: #2337ff;
  --accent-dark: #000d8a;
  --muted: #e6e6e6;
  --border: #ece9e9;
  --gray: 96, 115, 159;
  --gray-light: 229, 233, 240;
  --gray-dark: 34, 41, 57;
  --black: 15, 18, 25;
}

html[data-theme="dark"] {
  --background: #212737;
  --foreground: #eaedf3;
  --accent: #ff6b01;
  --accent-dark: #ff8833;
  --muted: #343f60;
  --border: #ab4b08;
  --gray: 156, 163, 175;
  --gray-light: 55, 65, 81;
  --gray-dark: 209, 213, 219;
  --black: 255, 255, 255;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-accent: var(--accent);
  --color-muted: var(--muted);
  --color-border: var(--border);
}

/* ===== Base Styles ===== */
@layer base {
  * {
    @apply border-border outline-accent/75;
    scrollbar-width: auto;
    scrollbar-color: var(--color-muted) transparent;
  }

  html {
    @apply overflow-y-scroll scroll-smooth;
  }

  body {
    @apply flex min-h-svh flex-col bg-background text-foreground;
    font-family: "Atkinson", system-ui, -apple-system, sans-serif;
    font-size: 20px;
    line-height: 1.7;
  }

  a,
  button {
    @apply outline-offset-1 outline-accent focus-visible:no-underline focus-visible:outline-2 focus-visible:outline-dashed;
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }

  a {
    color: var(--accent);
  }

  a:hover {
    color: var(--accent-dark);
  }
}

/* ===== Font Face ===== */
@font-face {
  font-family: "Atkinson";
  src: url("/fonts/atkinson-regular.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Atkinson";
  src: url("/fonts/atkinson-bold.woff") format("woff");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* ===== Layout Utilities ===== */
@utility max-w-app {
  @apply max-w-3xl;
}

@utility app-layout {
  @apply mx-auto w-full max-w-app px-4;
}

/* ===== Active Navigation ===== */
.active-nav {
  @apply underline decoration-wavy decoration-2 underline-offset-8;
}

/* ===== RTL Support ===== */
/* Auto-detect direction for mixed content */
[dir="auto"] {
  unicode-bidi: plaintext;
  text-align: start;
}

/* RTL-specific styles */
[dir="rtl"] {
  text-align: right;
}

[dir="rtl"] .text-start {
  text-align: right;
}

/* Keep code blocks LTR even in RTL context */
pre, code, kbd, samp {
  direction: ltr !important;
  unicode-bidi: isolate;
  text-align: left !important;
}

/* RTL blockquote styling - border on right side */
[dir="rtl"] blockquote {
  border-left: none;
  border-right: 4px solid var(--accent);
  padding-left: 0;
  padding-right: 20px;
}

/* Keep header/footer LTR regardless of content */
header, footer, nav {
  direction: ltr;
  unicode-bidi: isolate;
}

/* Allow title/content to follow document direction */
.post-title,
.post-content {
  direction: inherit;
  unicode-bidi: plaintext;
  text-align: start;
}

/* ===== Typography ===== */
h1, h2, h3, h4, h5, h6 {
  margin: 0 0 0.5rem 0;
  color: rgb(var(--black));
  line-height: 1.2;
  font-weight: 700;
}

h1 { font-size: 3.052em; }
h2 { font-size: 2.441em; }
h3 { font-size: 1.953em; }
h4 { font-size: 1.563em; }
h5 { font-size: 1.25em; }

strong, b {
  font-weight: 700;
}

p {
  margin-bottom: 1em;
}

/* ===== Prose Styles ===== */
.prose {
  max-width: 65ch;
  color: rgb(var(--gray-dark));
}

.prose p {
  margin-bottom: 1.5em;
}

.prose h1, .prose h2, .prose h3, .prose h4 {
  color: rgb(var(--black));
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

.prose a {
  color: var(--accent);
  text-decoration: underline;
  text-decoration-style: dashed;
  text-underline-offset: 4px;
}

.prose a:hover {
  color: var(--accent-dark);
}

.prose ul, .prose ol {
  padding-left: 1.5em;
  list-style-type: revert;
}

[dir="rtl"] .prose ul,
[dir="rtl"] .prose ol {
  padding-left: 0;
  padding-right: 1.5em;
}

.prose li {
  margin-bottom: 0.5em;
}

.prose li::marker {
  color: var(--accent);
}

.prose blockquote {
  border-left: 4px solid var(--accent);
  padding: 0 0 0 20px;
  margin: 1em 0;
  font-size: 1.1em;
  opacity: 0.9;
}

.prose img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 1em 0;
}

.prose hr {
  border: none;
  border-top: 1px solid rgb(var(--gray-light));
  margin: 2em 0;
}

.prose table {
  width: 100%;
  border-collapse: collapse;
  margin: 1em 0;
}

.prose th, .prose td {
  border: 1px solid var(--border);
  padding: 0.5em 1em;
  text-align: start;
}

.prose th {
  background: var(--muted);
}

/* Code blocks */
.prose code {
  padding: 2px 5px;
  background-color: rgb(var(--gray-light));
  border-radius: 2px;
  font-size: 0.9em;
}

.prose pre {
  padding: 1.5em;
  border-radius: 8px;
  overflow-x: auto;
  background: rgb(var(--gray-light));
}

.prose pre > code {
  all: unset;
  font-size: 0.9em;
}

/* ===== Screen Reader Only ===== */
.sr-only {
  border: 0;
  padding: 0;
  margin: 0;
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  clip-path: inset(50%);
  white-space: nowrap;
}

/* ===== Target Scroll Margin ===== */
:target {
  scroll-margin-block: 1rem;
}

/* ===== Card Styles ===== */
.card {
  @apply rounded-lg border border-border bg-background p-4 transition-shadow hover:shadow-md;
}

/* ===== Box Shadow ===== */
.box-shadow {
  box-shadow: 0 2px 6px rgba(var(--gray), 25%),
              0 8px 24px rgba(var(--gray), 33%),
              0 16px 32px rgba(var(--gray), 33%);
}
